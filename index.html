<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sad Alien Studios</title>
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Work+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="common.css">
  <style>
    html {
      scroll-behavior: smooth;
    }
    body {
      margin: 0;
      font-family: 'Work Sans', sans-serif;
      background: linear-gradient(to bottom, #0a1d37 0%, #0a1d37 320px, #3c75b4 460px, #a0d2ff 640px, #fffdf9 1000px, #fffdf9 100%);
      color: #222;
      overflow-x: hidden;
    }
    .navbar {
      position: relative;
      height: 320px;
      background: #0a1d37;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      padding-bottom: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1000;
    }
    .navbar::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: none;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    .nav-links {
      list-style: none;
      display: flex;
      gap: 1.5rem;
      margin: 0;
      padding: 0;
      z-index: 2;
      transform: translateY(80px);
      justify-content: center;
      flex-wrap: wrap;
      align-items: center;
    }
    .nav-links a {
      font-family: 'Patrick Hand', cursive;
      text-decoration: none;
      color: #fff;
      padding: 0.8rem 1.4rem;
      transition: all 0.3s ease;
      border-radius: 16px;
      position: relative;
      font-size: 1.2rem;
      min-width: 100px;
      text-align: center;
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2), 0 2px 4px rgba(0,0,0,0.1);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }

    .nav-links li:nth-child(1) a {
      background: rgba(255, 89, 94, 0.85);  /* Crayon Red */
    }
    .nav-links li:nth-child(2) a {
      background: rgba(255, 202, 58, 0.85);  /* Crayon Yellow */
    }
    .nav-links li:nth-child(3) a {
      background: rgba(138, 201, 38, 0.85);  /* Crayon Green */
    }
    .nav-links li:nth-child(4) a {
      background: rgba(25, 130, 196, 0.85);  /* Crayon Blue */
    }
    .nav-links li:nth-child(5) a {
      background: rgba(255, 125, 255, 0.85);  /* Crayon Pink */
    }

    .nav-links a:hover {
      transform: translateY(-2px) scale(1.1);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3), 0 3px 6px rgba(0,0,0,0.2);
      filter: brightness(1.1);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .svg-container {
      position: relative;
      top: 0;
      left: 10%;
      width: 100%;
      height: 1000px;
      pointer-events: none;
      overflow: visible;
    }
    .spaceship {
      position: absolute;
      width: 50px;
      z-index: 2;
    }
    .draw-path {
      fill: none;
      stroke: none;
      stroke-width: 3px;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-dasharray: 20000;
      stroke-dashoffset: 20000;
      animation: draw-line 8s ease forwards;
      filter: drop-shadow(0 0 10px #ffea6b) drop-shadow(0 0 18px #ffea6b);
    }
    @keyframes draw-line {
      to {
        stroke-dashoffset: 0;
      }
    }
    .particle {
      position: absolute;
      width: 6px;
      height: 6px;
      background: #ffea6b;
      border-radius: 50%;
      pointer-events: none;
      animation: floaty 1s ease-out forwards;
      filter: drop-shadow(0 0 10px #ffea6b) drop-shadow(0 0 30px #ffea6b);
    }
    @keyframes floaty {
      0% { opacity: 1; transform: scale(1); }
      100% { opacity: 1; transform: scale(1); }
    }
    .content {
      text-align: center;
      padding: 8rem 2rem 2rem;
    }
    .poster {
      width: 90%;
      max-width: 700px;
      border-radius: 18px;
      box-shadow: 0 4px 18px rgba(0,0,0,0.10);
      margin: 2.2rem auto 2.2rem;
      background: #fffdfa;
      display: block;
    }
    .trailer iframe {
      width: 100%;
      max-width: 720px;
      height: 405px;
      border: none;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
      overflow: hidden;
    }
    .screenshot-gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
    }
    .screenshot-gallery img {
      width: 200px;
      border-radius: 12px;
      transition: transform 0.3s ease;
    }
    .screenshot-gallery img:hover {
      transform: scale(1.05);
      cursor: pointer;
    }
    .star {
      position: absolute;
      width: 1px;
      height: 1px;
      background: #fff8cc;
      border-radius: 50%;
      opacity: 0.3;
      animation: twinkle var(--twinkle-duration) infinite alternate;
      box-shadow: 0 0 2px #fff8cc;
    }
    @keyframes twinkle {
      0% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.5); }
      100% { opacity: 0.3; transform: scale(1); }
    }

    #flower-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 1200px;
      pointer-events: none;
      z-index: -1;
      background: none;
    }

    .floating-flower {
      position: absolute;
      pointer-events: none;
      width: 40px;
      height: 40px;
      z-index: -1;
      opacity: 0.8;
      animation: floatMidair 4s ease-in-out infinite;
    }

    .flower-petal-1 .petals {
      filter: hue-rotate(0deg) saturate(1.1); /* Original pink color */
    }

    .flower-petal-2 .petals {
      filter: hue-rotate(330deg) saturate(1.1); /* Light pink */
    }

    .flower-petal-3 .petals {
      filter: hue-rotate(300deg) saturate(1.1); /* Darker pink */
    }

    .flower-petal-4 .petals {
      filter: hue-rotate(15deg) saturate(1.1); /* Peachy pink */
    }

    .flower-petal-5 .petals {
      filter: hue-rotate(345deg) saturate(1.1); /* Soft pink */
    }

    .flower-center {
      position: absolute;
      width: 40%;
      height: 40%;
      background: #FFD700;
      border-radius: 50%;
      top: 30%;
      left: 30%;
      z-index: 1;
    }

    @keyframes floatMidair {
      0% {
        transform: translateY(0) rotate(0deg);
      }
      25% {
        transform: translateY(-10px) rotate(3deg);
      }
      75% {
        transform: translateY(10px) rotate(-3deg);
      }
      100% {
        transform: translateY(0) rotate(0deg);
      }
    }

    /* Add responsive design */
    @media screen and (max-width: 768px) {
      .navbar {
        height: 280px;
        width: 100%;
        overflow: visible;
        position: relative;
      }
      
      .nav-links {
        position: absolute;
        bottom: 20px;
        left: 0;
        right: 0;
        gap: 0.6rem;
        flex-direction: row;
        justify-content: center;
        flex-wrap: nowrap;
        padding: 0 0.5rem;
        z-index: 1000;
      }

      .nav-links a {
        padding: 0.5rem 0.6rem;
        font-size: 0.9rem;
        min-width: auto;
      }

      .svg-container {
        position: absolute;
        left: -65%;
        width: 140%;
        height: 280px;
        transform: scale(0.45);
        transform-origin: center top;
      }

      #trail-svg {
        width: 100%;
        height: 280px;
      }

      .spaceship {
        width: 40px;
      }

      .particle {
        width: 4px;
        height: 4px;
      }
    }

    @media screen and (max-width: 480px) {
      .navbar {
        height: 260px;
      }

      .nav-links {
        gap: 0.6rem;
      }

      .nav-links a {
        padding: 0.3rem 0.6rem;
        font-size: 0.85rem;
      }

      .svg-container {
        left: -80%;
        width: 150%;
        height: 260px;
        transform: scale(0.31);
        transform-origin: center top;
      }

      #trail-svg {
        height: 260px;
      }

      .spaceship {
        width: 35px;
      }
    }

    /* Make content responsive */
    .content {
      text-align: center;
      padding: 4rem 1rem 1rem; /* Adjusted padding for mobile */
      max-width: 1200px;
      margin: 0 auto;
    }

    .title-section {
      margin: 2rem auto 4rem;
      max-width: 800px;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(8px);
    }

    .title-section h1 {
      font-family: 'Patrick Hand', cursive;
      font-size: 3.5rem;
      margin: 0 0 1rem;
      color: #e74c3c; /* A friendly, vibrant red */
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .title-section .subtitle {
      font-size: 1.4rem;
      line-height: 1.6;
      margin: 0;
      color: #3c75b4;
      font-family: 'Work Sans', sans-serif;
      font-weight: 600;
    }

    @media screen and (max-width: 768px) {
      .title-section {
        margin: 1.5rem 1rem 3rem;
        padding: 1.5rem;
      }

      .title-section h1 {
        font-size: 2.5rem;
      }

      .title-section .subtitle {
        font-size: 1.2rem;
      }
    }

    .description {
      text-align: center;
      max-width: 800px;
      margin: 4rem auto;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(8px);
    }
    
    .description p {
      font-size: 1.2rem;
      line-height: 1.8;
      margin: 0;
      color: #333;
    }

    @media screen and (max-width: 768px) {
      .description {
        margin: 3rem 1rem;
        padding: 1.5rem;
      }
      
      .description p {
        font-size: 1.1rem;
        line-height: 1.6;
      }
    }

    .trailer iframe {
      width: 100%; /* Full width on mobile */
      max-width: 720px;
      height: 56.25vw; /* Maintain 16:9 aspect ratio */
      max-height: 405px;
      border: none;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    }

    .screenshot-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      padding: 0 1rem;
      margin-top: 2rem;
    }

    .screenshot-gallery img {
      width: 100%;
      height: auto;
      border-radius: 12px;
      transition: transform 0.3s ease;
    }

    /* Modal styles */
    .modal-backdrop {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(10, 29, 55, 0.9);
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .modal-backdrop.active {
      opacity: 1;
    }

    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      z-index: 1001;
      opacity: 0;
      transition: all 0.3s ease;
      width: 90vw;
      height: 80vh;
      background: rgba(10, 29, 55, 0.4);
      border-radius: 12px;
      padding: 20px;
    }

    .modal.active {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }

    .modal-content {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }

    .modal-close {
      position: absolute;
      top: -40px;
      right: 0;
      color: white;
      font-size: 32px;
      cursor: pointer;
      background: none;
      border: none;
      padding: 8px;
      transition: transform 0.2s ease;
      z-index: 1002;
    }

    .modal-close:hover {
      transform: scale(1.1);
    }

    .modal-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.15);
      color: white;
      border: none;
      padding: 20px 16px;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.2s ease;
      font-size: 24px;
      z-index: 1002;
    }

    .modal-nav:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-50%) scale(1.1);
    }

    .modal-prev {
      left: 20px;
    }

    .modal-next {
      right: 20px;
    }

    @media screen and (max-width: 768px) {
      .modal {
        width: 95vw;
        height: 75vh;
        padding: 10px;
      }
      
      .modal-nav {
        padding: 15px 12px;
        font-size: 20px;
      }
      
      .modal-prev {
        left: 10px;
      }
      
      .modal-next {
        right: 10px;
      }
    }

    .intro-balloon {
      margin: 2rem auto 2.5rem;
      max-width: 800px;
      padding: 2.5rem 2rem;
      background: rgba(255, 255, 255, 0.85);
      border-radius: 28px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
      backdrop-filter: blur(8px);
      text-align: center;
    }
    .intro-balloon h1 {
      font-family: 'Patrick Hand', cursive;
      font-size: 3.7rem;
      margin: 0 0 1rem;
      color: #d5002c; /* updated vibrant red */
      font-weight: 700;
      text-shadow:
        0 2px 6px #fff,
        0 4px 12px #d5002c33;
      letter-spacing: 1px;
    }

    @keyframes pop-glow {
      0%, 100% {
        text-shadow:
          0 2px 16px #fff2e0,
          0 4px 32px #ff3c3c88,
          0 0 0 #fff,
          2px 2px 8px #ffb34788,
          0 0 32px #ff3c3c44;
        transform: scale(1);
      }
      50% {
        text-shadow:
          0 4px 32px #fff2e0,
          0 8px 48px #ff3c3c,
          0 0 8px #fff,
          2px 2px 16px #ffb347,
          0 0 64px #ff3c3c;
        transform: scale(1.04);
      }
    }

    .intro-balloon .subtitle {
      font-size: 1.4rem;
      line-height: 1.6;
      margin: 0 0 1.5rem;
      color: #3c75b4;
      font-family: 'Work Sans', sans-serif;
      font-weight: 600;
    }
    .intro-balloon .description-text {
      font-size: 1.15rem;
      line-height: 1.8;
      color: #333;
      margin: 0;
    }
    @media screen and (max-width: 768px) {
      .intro-balloon {
        margin: 1.5rem 1rem 2rem;
        padding: 1.5rem 0.7rem;
      }
      .intro-balloon h1 {
        font-size: 2.7rem;
      }
      .intro-balloon .subtitle {
        font-size: 1.1rem;
      }
      .intro-balloon .description-text {
        font-size: 1rem;
      }
    }
    .trailer h2,
    .screenshots h2 {
      font-family: 'Patrick Hand', cursive;
      color: #d5002c; /* updated vibrant red */
      font-size: 3.2rem;
      font-weight: 900;
      letter-spacing: 0.06em;
      text-shadow:
        0 2px 6px #fff,
        0 4px 12px #d5002c33;
      margin-bottom: 1.2rem;
      margin-top: 0.5rem;
    }
    .screenshots h2 {
      font-size: 2.1rem;
    }
    @media screen and (max-width: 768px) {
      .trailer h2,
      .screenshots h2 {
        font-size: 1.5rem;
      }
    }
    .section-bubble {
      margin: 2.5rem auto 2.5rem;
      max-width: 900px;
      padding: 1.2rem 1rem 2.2rem 1rem;
      background: rgba(255,255,255,0.55); /* much lighter */
      border-radius: 18px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      text-align: center;
      position: relative;
    }
    .section-bubble h2 {
      margin-top: 0.5rem;
      margin-bottom: 1.3rem;
      position: relative;
      z-index: 2;
    }
    @media screen and (max-width: 768px) {
      .section-bubble {
        margin: 1.2rem 0.5rem 1.5rem;
        padding: 0.7rem 0.2rem 1.2rem 0.2rem;
        border-radius: 12px;
      }
      .section-bubble h2 {
        margin-top: 0.2rem;
        margin-bottom: 1rem;
      }
    }
    .tool-dropdown {
      display: block;
      position: relative;
    }
    .tool-dropdown-content {
      display: none;
      position: absolute;
      min-width: 170px;
      left: 50%;
      transform: translateX(-50%);
      top: 100%;
      background: rgba(138, 201, 38, 0.95);
      box-shadow: 0 4px 18px rgba(60, 117, 180, 0.13);
      border-radius: 12px;
      padding: 0.4rem 0;
      border: none;
      z-index: 100;
      transition: opacity 0.18s;
    }

    .tool-dropdown-content a {
      background: none !important;
      color: #fff;
      padding: 0.7rem 1.2rem;
      text-decoration: none;
      display: block;
      font-family: 'Work Sans', sans-serif;
      font-size: 1.08rem;
      border-radius: 8px;
      transition: background 0.18s, color 0.18s;
      margin: 0 0.3rem;
      text-align: left;
      box-shadow: none;
    }

    .tool-dropdown-content a:hover {
      background: #b6e35a;
      color: #255080;
    }

    .tool-dropdown:hover .tool-dropdown-content {
      display: block;
    }

    .tool-link {
      display: block;
      font-family: 'Patrick Hand', cursive;
      text-decoration: none;
      color: #fff;
      padding: 0.8rem 1.4rem;
      border-radius: 16px;
      min-width: 100px;
      text-align: center;
      background: rgba(138, 201, 38, 0.85);
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2), 0 2px 4px rgba(0,0,0,0.1);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      cursor: pointer;
      user-select: none;
      position: relative;
      z-index: 2;
      padding-right: 2.2rem;
    }

    .tool-link::after {
      content: '';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      width: 0;
      height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-top: 5px solid #fff;
      transition: transform 0.3s ease;
    }

    .tool-dropdown:hover .tool-link::after {
      transform: translateY(-50%) rotate(180deg);
    }

    .tool-link:hover, .tool-dropdown:focus-within .tool-link {
      transform: translateY(-2px) scale(1.1);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3), 0 3px 6px rgba(0,0,0,0.2);
      filter: brightness(1.1);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <div class="svg-container" id="svg-container">
    <svg viewBox="0 0 1920 1080" style="height: 1000px;" preserveAspectRatio="xMidYMid meet" id="trail-svg">
      <path class="draw-path" id="trail-path" d="M 616.9 43.7 ... Z" />
    </svg>
    <img src="Images/spaceship.png" alt="Spaceship" class="spaceship" id="spaceship" />
  </div>
  <div class="content">
    <div class="intro-balloon">
      <h1>Mystery on the Mountain</h1>
      <p class="subtitle">A whimsical skiing adventure full of secrets and silly characters.</p>
      <p class="description-text">Mystery on the Mountain is a humorous 3D skiing adventure game in which players become a blogger-journalist investigating the mysterious disappearance of a skiing champion. Explore the Strudel Mountains ski resort, meet eccentric characters, complete thrilling downhill runs, gather coins, and unlock upgrades. Every slope you master and every weird interview you do brings you closer to unraveling the hidden truth. Will you be able to find the champion?</p>
    </div>

    <div class="section-bubble">
      <img src="Images/poster.png" alt="Mystery on the Mountain Poster" class="poster" />
    </div>

    <section class="trailer section-bubble">
      <h2>Watch the Trailer</h2>
      <iframe src="https://www.youtube.com/embed/rCQCFR6zvLw" allowfullscreen></iframe>
    </section>

    <section class="screenshots section-bubble">
      <h2>Take a Peek!</h2>
      <div class="screenshot-gallery">
        <img src="Images/screenshot1.png" alt="Gameplay Screenshot 1" />
        <img src="Images/screenshot2.png" alt="Gameplay Screenshot 2" />
        <img src="Images/screenshot3.png" alt="Gameplay Screenshot 3" />
        <img src="Images/screenshot4.png" alt="Gameplay Screenshot 4" />
        <img src="Images/Screenshot 5.png" alt="Gameplay Screenshot 5" />
      </div>
    </section>
  </div>

  <div id="flower-container"></div>

  <!-- Add Modal Structure -->
  <div class="modal-backdrop"></div>
  <div class="modal">
    <button class="modal-close">×</button>
    <div class="modal-content">
      <img src="" alt="Full size screenshot" />
    </div>
    <button class="modal-nav modal-prev">❮</button>
    <button class="modal-nav modal-next">❯</button>
  </div>

  <script src="common.js"></script>
  <script>
    window.addEventListener('DOMContentLoaded', function() {
      // Only run on homepage
      const svg = document.getElementById('trail-svg');
      const path = document.getElementById('trail-path');
      const spaceship = document.getElementById('spaceship');
      if (!svg || !path || !spaceship) return;

      const totalLength = path.getTotalLength();
      let progress = 0;
      const duration = 8000; // 8 seconds
      const starInterval = 18; // px along path between stars
      let lastStarDist = 0;
      let lastTimestamp = null;
      let finished = false;

      function animateSpaceship(timestamp) {
        if (!lastTimestamp) lastTimestamp = timestamp;
        const elapsed = timestamp - lastTimestamp;
        lastTimestamp = timestamp;
        progress += elapsed / duration * totalLength;
        if (progress > totalLength) progress = totalLength;

        const pos = path.getPointAtLength(progress);
        const nextPos = path.getPointAtLength(Math.min(progress + 1, totalLength));
        const angle = Math.atan2(nextPos.y - pos.y, nextPos.x - pos.x) * 180 / Math.PI;
        spaceship.style.left = `${pos.x - spaceship.width / 2}px`;
        spaceship.style.top = `${pos.y - spaceship.height / 2}px`;
        spaceship.style.transform = `rotate(${angle}deg)`;
        spaceship.style.position = 'absolute';
        spaceship.style.pointerEvents = 'none';
        spaceship.style.zIndex = 2;

        // Leave a bright yellow star every starInterval px
        if (progress - lastStarDist >= starInterval) {
          lastStarDist = progress;
          const star = document.createElement('div');
          star.className = 'star';
          const size = 12 + Math.random() * 8; // 12-20px
          star.style.left = `${pos.x - size / 2}px`;
          star.style.top = `${pos.y - size / 2}px`;
          star.style.width = `${size}px`;
          star.style.height = `${size}px`;
          star.style.background = 'radial-gradient(circle, #ffe066 60%, #fff 100%)';
          star.style.borderRadius = '50%';
          star.style.position = 'absolute';
          star.style.zIndex = 1;
          star.style.boxShadow = '0 0 24px 8px #fff, 0 0 48px 16px #ffe066, 0 0 64px 32px #fff';
          star.style.filter = 'brightness(1.5) drop-shadow(0 0 8px #fff)';
          svg.parentNode.appendChild(star);
        }

        if (progress < totalLength) {
          requestAnimationFrame(animateSpaceship);
        } else if (!finished) {
          finished = true;
          flyAway(pos, angle);
        }
      }

      function flyAway(pos, angle) {
        // Animate spaceship flying to the right
        let flyProgress = 0;
        const flyDuration = 1500; // ms
        const startX = pos.x;
        const startY = pos.y;
        const endX = startX + 500; // fly 500px to the right
        const endY = startY - 80; // slight upward angle
        function animateFlyAway(ts) {
          if (!animateFlyAway.start) animateFlyAway.start = ts;
          const t = Math.min((ts - animateFlyAway.start) / flyDuration, 1);
          const x = startX + (endX - startX) * t;
          const y = startY + (endY - startY) * t;
          spaceship.style.left = `${x - spaceship.width / 2}px`;
          spaceship.style.top = `${y - spaceship.height / 2}px`;
          spaceship.style.transform = `rotate(${angle + 30}deg)`;
          if (t < 1) {
            requestAnimationFrame(animateFlyAway);
          } else {
            spaceship.style.opacity = '0';
          }
        }
        requestAnimationFrame(animateFlyAway);
      }

      // Position spaceship at start
      const start = path.getPointAtLength(0);
      spaceship.style.left = `${start.x - spaceship.width / 2}px`;
      spaceship.style.top = `${start.y - spaceship.height / 2}px`;
      spaceship.style.position = 'absolute';
      spaceship.style.pointerEvents = 'none';
      spaceship.style.zIndex = 2;

      // Start animation after a short delay
      setTimeout(() => {
        progress = 0;
        lastStarDist = 0;
        lastTimestamp = null;
        requestAnimationFrame(animateSpaceship);
      }, 500);
    });
  </script>
</body>
</html>


