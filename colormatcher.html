<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Color Theme Matcher</title>
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Work+Sans:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(to bottom, #e0eafc, #cfdef3 100%);
      font-family: 'Work Sans', sans-serif;
      margin: 0;
      min-height: 100vh;
      color: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    .container {
      background: #fff;
      margin-top: 3rem;
      padding: 2rem 2.5rem;
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.10);
      max-width: 520px;
      width: 100%;
      text-align: center;
    }
    h1 {
      font-family: 'Patrick Hand', cursive;
      font-size: 2.2rem;
      margin-bottom: 1.5rem;
      color: #3c75b4;
    }
    .input-row {
      display: flex;
      gap: 1rem;
      justify-content: center;
      align-items: center;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }
    .input-row label {
      font-size: 1.1rem;
      color: #3c75b4;
    }
    .input-row input[type="color"] {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 8px;
      background: none;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .input-row input[type="text"] {
      font-size: 1.1rem;
      padding: 0.4rem 0.8rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 110px;
      text-align: center;
    }
    .input-row select {
      font-size: 1.1rem;
      padding: 0.4rem 0.8rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      background: #f4f4f4;
    }
    .swatch-row {
      display: flex;
      gap: 1.2rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 2rem;
    }
    .swatch {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      user-select: all;
    }
    .swatch-color {
      width: 54px;
      height: 54px;
      border-radius: 12px;
      border: 2px solid #eee;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      margin-bottom: 0.3rem;
      transition: border 0.2s;
    }
    .swatch:hover .swatch-color {
      border: 2px solid #3c75b4;
    }
    .swatch-hex {
      font-family: 'Work Sans', monospace;
      font-size: 1.1rem;
      background: #f4f4f4;
      padding: 0.2rem 0.7rem;
      border-radius: 8px;
      border: 1px solid #ddd;
      transition: background 0.2s;
    }
    .swatch-hex:active {
      background: #e0eafc;
    }
    .instructions {
      color: #666;
      font-size: 1rem;
      margin-top: 1.2rem;
    }
    .navbar {
      position: relative;
      height: 320px;
      background: #0a1d37;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      padding-bottom: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1000;
    }
    .navbar::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: none;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    .nav-links {
      list-style: none;
      display: flex;
      gap: 1.5rem;
      margin: 0;
      padding: 0;
      z-index: 2;
      transform: translateY(80px);
      justify-content: center;
      flex-wrap: wrap;
      align-items: flex-end;
    }
    .nav-links a {
      font-family: 'Patrick Hand', cursive;
      text-decoration: none;
      color: #fff;
      padding: 0.8rem 1.4rem;
      transition: all 0.3s ease;
      border-radius: 16px;
      position: relative;
      font-size: 1.2rem;
      min-width: 100px;
      text-align: center;
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2), 0 2px 4px rgba(0,0,0,0.1);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }
    .nav-links li:nth-child(1) a {
      background: rgba(255, 89, 94, 0.85);
    }
    .nav-links li:nth-child(2) a {
      background: rgba(255, 202, 58, 0.85);
    }
    .nav-links li:nth-child(3) a {
      background: rgba(138, 201, 38, 0.85);
    }
    .nav-links li:nth-child(4) a {
      background: rgba(25, 130, 196, 0.85);
    }
    .nav-links li:nth-child(5) a {
      background: rgba(255, 125, 255, 0.85);
    }
    .nav-links a:hover {
      transform: translateY(-2px) scale(1.1);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3), 0 3px 6px rgba(0,0,0,0.2);
      filter: brightness(1.1);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .tool-dropdown {
      display: flex;
      align-items: center;
      height: 100%;
      position: relative;
    }
    .tool-dropdown-content {
      display: none;
      position: absolute;
      min-width: 170px;
      left: 50%;
      transform: translateX(-50%);
      top: 110%;
      background: #fff;
      box-shadow: 0 4px 18px rgba(60, 117, 180, 0.13);
      border-radius: 12px;
      padding: 0.4rem 0;
      border: none;
      z-index: 100;
      transition: opacity 0.18s;
    }
    .tool-dropdown-content a {
      background: none !important;
      color: #3c75b4;
      padding: 0.7rem 1.2rem;
      text-decoration: none;
      display: block;
      font-family: 'Work Sans', sans-serif;
      font-size: 1.08rem;
      border-radius: 8px;
      transition: background 0.18s, color 0.18s;
      margin: 0 0.3rem;
      text-align: left;
      box-shadow: none;
    }
    .tool-dropdown-content a:hover {
      background: #e0eafc;
      color: #255080;
    }
    .tool-dropdown:hover .tool-dropdown-content,
    .tool-dropdown:focus-within .tool-dropdown-content {
      display: block;
    }
    .tool-link {
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Patrick Hand', cursive;
      text-decoration: none;
      color: #fff;
      padding: 0.8rem 1.4rem;
      border-radius: 16px;
      min-width: 100px;
      text-align: center;
      background: rgba(138, 201, 38, 0.85);
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2), 0 2px 4px rgba(0,0,0,0.1);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      cursor: pointer;
      user-select: none;
      position: relative;
      z-index: 2;
    }
    .tool-link:hover, .tool-dropdown:focus-within .tool-link {
      transform: translateY(-2px) scale(1.1);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3), 0 3px 6px rgba(0,0,0,0.2);
      filter: brightness(1.1);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    @media (max-width: 768px) {
      .navbar {
        height: 280px;
      }
      .nav-links {
        gap: 0.6rem;
        flex-direction: row;
        justify-content: center;
        flex-wrap: nowrap;
        padding: 0 0.5rem;
        transform: translateY(120px);
      }
      .nav-links a {
        padding: 0.5rem 0.6rem;
        font-size: 0.9rem;
        min-width: auto;
      }
    }
    @media screen and (max-width: 480px) {
      .navbar {
        height: 260px;
      }
      .nav-links {
        gap: 0.6rem;
      }
      .nav-links a {
        padding: 0.3rem 0.6rem;
        font-size: 0.85rem;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li class="tool-dropdown">
        <a href="#" class="tool-link">Tools â–¾</a>
        <div class="tool-dropdown-content">
          <a href="colormatcher.html">Color Matcher</a>
          <a href="imagetohex.html">Image to Hex</a>
        </div>
      </li>
      <li><a href="music.html">Music</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>
  <div class="container">
    <h1>ðŸŽ¨ Color Theme Matcher</h1>
    <div class="input-row">
      <label for="colorPicker">Pick a color:</label>
      <input type="color" id="colorPicker" value="#3c75b4">
      <input type="text" id="hexInput" value="#3c75b4" maxlength="7">
      <select id="schemeSelect">
        <option value="complementary">Complementary</option>
        <option value="analogous">Analogous</option>
        <option value="triadic">Triadic</option>
        <option value="split-complementary">Split Complementary</option>
        <option value="tetradic">Tetradic</option>
        <option value="square">Square</option>
        <option value="monochromatic">Monochromatic</option>
        <option value="diadic">Diadic</option>
        <option value="pentadic">Pentadic</option>
        <option value="pastel">Pastel</option>
        <option value="earth">Earth Tones</option>
        <option value="warm">Warm Colors</option>
        <option value="cool">Cool Colors</option>
        <option value="highkey">High-Key</option>
        <option value="lowkey">Low-Key</option>
        <optgroup label="More...">
          <option value="gradient">Gradient (Color Ramp)</option>
          <option value="gradient-extended">Gradient Extended</option>
          <option value="achromatic">Achromatic (Greyscale)</option>
          <option value="accented-neutral">Accented Neutral</option>
          <option value="compound">Compound (Complementary Analogous)</option>
          <option value="fauvist">Fauvist (Vivid)</option>
          <option value="autumn">Autumn (Seasonal)</option>
          <option value="spring">Spring (Seasonal)</option>
          <option value="summer">Summer (Seasonal)</option>
          <option value="winter">Winter (Seasonal)</option>
          <option value="retro50s">Retro 50s</option>
          <option value="discordant">Discordant (Clash)</option>
          <option value="metallic">Metallic</option>
          <option value="optical-mix">Optical Mix</option>
          <option value="accessible">High-Contrast Accessible</option>
          <option value="psychology-calm">Psychology: Calm</option>
          <option value="relaxing">Relaxing (Mood)</option>
          <option value="energetic">Energetic (Mood)</option>
          <option value="polychromatic">Polychromatic</option>
        </optgroup>
      </select>
    </div>
    <div class="instructions">Select a color and a harmony to see matching colors. Click a swatch to copy its hex code!</div>
    <div id="schemeDesc" style="margin: 0.7rem 0 0.5rem 0; color: #3c75b4; font-size: 1.05rem; min-height: 1.5em;"></div>
    <div class="swatch-row" id="referenceRow"></div>
    <div class="swatch-row" id="swatchRow"></div>
    <button id="addColorBtn" style="display:none;margin:1.2rem auto 0 auto;padding:0.5rem 1.2rem;font-size:1.1rem;border-radius:8px;border:none;background:#3c75b4;color:#fff;cursor:pointer;transition:background 0.2s;">+</button>
  </div>
  <script>
    const SCHEME_DESCS = {
      'complementary': 'Colors directly opposite each other on the color wheel. High contrast, vibrant combinations.',
      'analogous': 'Colors adjacent to each other on the color wheel. Harmonious and serene.',
      'triadic': 'Three colors evenly spaced around the wheel. Balanced and vibrant.',
      'split-complementary': 'A base color plus two adjacent to its complement. Good contrast, less tension.',
      'tetradic': 'Two pairs of complementary colors. Rich and diverse palettes.',
      'square': 'Four colors evenly spaced around the wheel. Balanced, lively palettes.',
      'monochromatic': 'Variations of one hue (lightness, darkness, saturation). Clean and elegant.',
      'diadic': 'Two colors separated by one intermediate color. Slightly more harmonious than complementary.',
      'pentadic': 'Five colors selected evenly around the color wheel. Diverse, complex palettes.',
      'pastel': 'Soft, calming, and gentle combinations. High brightness, low saturation.',
      'earth': 'Colors inspired by nature: browns, greens, rust, muted blues. Warm, grounded.',
      'warm': 'Reds, oranges, yellows. Evoke warmth and energy.',
      'cool': 'Blues, greens, purples. Evoke calmness and serenity.',
      'highkey': 'Mostly bright colors; uplifting, fresh vibes.',
      'lowkey': 'Mostly dark colors; moody, dramatic, or sophisticated.'
    };

    function hexToHsl(hex) {
      hex = hex.replace('#', '');
      if (hex.length === 3) hex = hex.split('').map(x => x + x).join('');
      const r = parseInt(hex.substring(0,2), 16) / 255;
      const g = parseInt(hex.substring(2,4), 16) / 255;
      const b = parseInt(hex.substring(4,6), 16) / 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;
      if (max === min) {
        h = s = 0;
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch(max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }
      return [Math.round(h*360), Math.round(s*100), Math.round(l*100)];
    }
    function hslToHex(h, s, l) {
      h = h % 360; if (h < 0) h += 360;
      s /= 100; l /= 100;
      let c = (1 - Math.abs(2 * l - 1)) * s;
      let x = c * (1 - Math.abs((h / 60) % 2 - 1));
      let m = l - c/2;
      let r=0, g=0, b=0;
      if (h < 60) { r = c; g = x; b = 0; }
      else if (h < 120) { r = x; g = c; b = 0; }
      else if (h < 180) { r = 0; g = c; b = x; }
      else if (h < 240) { r = 0; g = x; b = c; }
      else if (h < 300) { r = x; g = 0; b = c; }
      else { r = c; g = 0; b = x; }
      r = Math.round((r + m) * 255);
      g = Math.round((g + m) * 255);
      b = Math.round((b + m) * 255);
      return '#' + [r,g,b].map(x => x.toString(16).padStart(2,'0')).join('').toUpperCase();
    }
    function clampHex(hex) {
      hex = hex.trim().replace('#','');
      if (hex.length === 3) hex = hex.split('').map(x=>x+x).join('');
      return '#' + hex.substring(0,6).toUpperCase();
    }
    let extendableSchemes = ['analogous','monochromatic','pastel','gradient','highkey','lowkey','polychromatic'];
    let colorCount = {
      'analogous': 7,
      'monochromatic': 7,
      'pastel': 7,
      'gradient': 7,
      'highkey': 7,
      'lowkey': 7,
      'polychromatic': 7
    };
    // New modular generator functions
    function generateComplementary(hex) {
      const [h, s, l] = hexToHsl(hex);
      return [hslToHex((h + 180) % 360, s, l)];
    }
    function generateAnalogous(hex, numberOfColors = 5, angleStep = 30) {
      const [h, s, l] = hexToHsl(hex);
      const colors = [];
      const half = Math.floor(numberOfColors / 2);
      for(let i = -half; i <= half; i++) {
        if(i === 0) continue;
        const hue = (h + i * angleStep + 360) % 360;
        colors.push(hslToHex(hue, s, l));
      }
      return colors;
    }
    function generateTriadic(hex) {
      const [h, s, l] = hexToHsl(hex);
      return [
        hslToHex((h + 120) % 360, s, l),
        hslToHex((h + 240) % 360, s, l)
      ];
    }
    function generateSplitComplementary(hex) {
      const [h, s, l] = hexToHsl(hex);
      return [
        hslToHex((h + 150) % 360, s, l),
        hslToHex((h + 210) % 360, s, l)
      ];
    }
    function generateTetradic(hex) {
      const [h, s, l] = hexToHsl(hex);
      return [
        hslToHex((h + 90) % 360, s, l),
        hslToHex((h + 180) % 360, s, l),
        hslToHex((h + 270) % 360, s, l)
      ];
    }
    function generateSquare(hex) {
      const [h, s, l] = hexToHsl(hex);
      return [
        hslToHex((h + 90) % 360, s, l),
        hslToHex((h + 180) % 360, s, l),
        hslToHex((h + 270) % 360, s, l)
      ];
    }
    function generateMonochromatic(hex, variations = 5) {
      const [h, s, l] = hexToHsl(hex);
      const colors = [];
      const step = 100 / (variations + 1);
      for(let i = 1; i <= variations; i++) {
        let newL = (l + step * i) % 100;
        colors.push(hslToHex(h, s, newL));
      }
      return colors;
    }
    function generatePastel(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const colors = [];
      for(let i = 0; i < variations; i++) {
        colors.push(hslToHex((h + i * (360 / variations)) % 360, 40, 85));
      }
      return colors;
    }
    function generateGradient(hex, endOffset = 120, steps = 5) {
      const [h, s, l] = hexToHsl(hex);
      const colors = [];
      const endHue = (h + endOffset) % 360;
      for(let i = 0; i < steps; i++) {
        const t = i / (steps - 1);
        const interpHue = (h * (1 - t) + endHue * t) % 360;
        const interpL = l * (1 - t) + (90 * t);
        colors.push(hslToHex(interpHue, s, interpL));
      }
      return colors;
    }
    function generateHighKey(hex, variations = 5) {
      const [h, s, ] = hexToHsl(hex);
      const colors = [];
      const startL = 75;
      const endL = 95;
      for(let i = 0; i < variations; i++) {
        const l = startL + (i * (endL - startL)) / (variations - 1);
        colors.push(hslToHex(h, s, l));
      }
      return colors;
    }
    function generateLowKey(hex, variations = 5) {
      const [h, s, ] = hexToHsl(hex);
      const colors = [];
      const startL = 5;
      const endL = 25;
      for(let i = 0; i < variations; i++) {
        const l = startL + (i * (endL - startL)) / (variations - 1);
        colors.push(hslToHex(h, s, l));
      }
      return colors;
    }
    function generatePolychromatic(hex, variations = 6) {
      const [, s, l] = hexToHsl(hex);
      const colors = [];
      for(let i = 1; i <= variations; i++) {
        colors.push(hslToHex((i * 360 / variations) % 360, s, l));
      }
      return colors;
    }
    function generateEarth(hex) {
      let hsl = hexToHsl(hex);
      return [
        hslToHex((hsl[0] + 30) % 360, 40, 35),
        hslToHex((hsl[0] + 60) % 360, 30, 40),
        hslToHex((hsl[0] + 90) % 360, 30, 30),
        hslToHex((hsl[0] + 120) % 360, 30, 35),
        hslToHex((hsl[0] + 150) % 360, 30, 30),
        hslToHex((hsl[0] + 180) % 360, 25, 32),
        hslToHex((hsl[0] + 210) % 360, 25, 28),
        hslToHex((hsl[0] + 240) % 360, 20, 25)
      ];
    }
    function generateWarm(hex, variations = 5) {
      const [h, , l] = hexToHsl(hex);
      const colors = [];
      for (let i = 0; i < variations; i++) {
        const hue = (h + i * 10 + 10) % 60; // Keep hues in red-orange-yellow
        colors.push(hslToHex(hue, 80, l));
      }
      return colors;
    }
    function generateCool(hex, variations = 5) {
      const [h, , l] = hexToHsl(hex);
      const colors = [];
      for (let i = 0; i < variations; i++) {
        const hue = (h + 180 + i * 10) % 360; // Rotate toward blue/green/purple range
        colors.push(hslToHex(hue, 70, l));
      }
      return colors;
    }
    function generateAchromatic(variations = 5) {
      const colors = [];
      const step = 100 / (variations + 1);
      for(let i = 1; i <= variations; i++) {
        colors.push(hslToHex(0, 0, step * i));
      }
      return colors;
    }
    function generateAccentedNeutral(hex, neutrals = 4) {
      const [h, s, l] = hexToHsl(hex);
      const colors = [];
      const step = 70 / (neutrals + 1);
      for(let i = 1; i <= neutrals; i++) {
        colors.push(hslToHex(h, 5, step * i + 15));
      }
      colors.push(hex);
      return colors;
    }
    function generateCompound(hex) {
      const [h, s, l] = hexToHsl(hex);
      return [
        hslToHex((h - 30 + 360) % 360, s, l),
        hslToHex((h + 30) % 360, s, l),
        hslToHex((h + 180) % 360, s, l),
        hslToHex((h + 150) % 360, s, l),
        hslToHex((h + 210) % 360, s, l)
      ];
    }
    function generateEarthTones(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const earthSaturation = [30, 35, 40, 25, 20];
      const earthLightness = [25, 30, 35, 40, 45];
      const colors = [];
      for(let i = 0; i < variations; i++) {
        colors.push(hslToHex((h + i * 30) % 360, earthSaturation[i % earthSaturation.length], earthLightness[i % earthLightness.length]));
      }
      return colors;
    }
    function generateWarmColors(variations = 5) {
      const warmHues = [10, 25, 40, 55, 70];
      const colors = warmHues.slice(0, variations).map(hue => hslToHex(hue, 75, 60));
      return colors;
    }
    function generateCoolColors(variations = 5) {
      const coolHues = [190, 200, 210, 220, 230];
      const colors = coolHues.slice(0, variations).map(hue => hslToHex(hue, 60, 60));
      return colors;
    }
    function generateFauvist(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const colors = [];
      for(let i = 0; i < variations; i++) {
        const hue = (h + i * 72) % 360;
        colors.push(hslToHex(hue, 100, 60));
      }
      return colors;
    }
    function generateAutumnColors(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const sat = 60;
      const light = 45;
      const hues = [h, h + 10, h + 20, h - 10, h - 20].map(v => (v + 360) % 360);
      return hues.slice(0, variations).map(hue => hslToHex(hue, sat, light));
    }
    function generateRetro50s(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const retroSaturation = [60, 65, 70, 55, 60];
      const retroLightness = [70, 65, 80, 75, 70];
      const retroOffsets = [0, 30, -45, 60, -30];
      const colors = [];
      for(let i = 0; i < variations; i++) {
        const hue = (h + retroOffsets[i % retroOffsets.length] + 360) % 360;
        colors.push(hslToHex(hue, retroSaturation[i % retroSaturation.length], retroLightness[i % retroLightness.length]));
      }
      return colors;
    }
    function generateDiscordant(hex) {
      const [h, s, l] = hexToHsl(hex);
      return [
        hslToHex((h + 165) % 360, s, l),
        hslToHex((h + 195) % 360, s, l)
      ];
    }
    function generateMetallic(hex) {
      const [h, s, l] = hexToHsl(hex);
      return [
        hex, // user input
        hslToHex((h + 45) % 360, 30, 50), // gold-ish
        hslToHex((h + 90) % 360, 5, 70),  // silver-ish
        hslToHex((h + 25) % 360, 40, 35)  // bronze-ish
      ];
    }
    function generateGradientExtended(hex, steps = 7) {
      const [h, s, l] = hexToHsl(hex);
      const colors = [];
      const endHue = (h + 180) % 360;
      for(let i = 0; i < steps; i++) {
        const t = i / (steps - 1);
        colors.push(hslToHex((h * (1 - t) + endHue * t) % 360, s, l));
      }
      return colors;
    }
    function generateOpticalMix(hex) {
      const [h, s, l] = hexToHsl(hex);
      return [
        hex,
        hslToHex((h + 180) % 360, s, l)
      ];
    }
    function generateAccessible(hex) {
      const [h, , l] = hexToHsl(hex);
      const highContrastL = l < 50 ? 95 : 5;
      return [
        hex,
        hslToHex(h, 10, highContrastL)
      ];
    }
    function generatePsychologyCalm(hex) {
      const [h, , ] = hexToHsl(hex);
      return [
        hslToHex(h, 40, 80),
        hslToHex(h, 30, 70),
        hslToHex((h + 30) % 360, 35, 65)
      ];
    }
    function generateWinterColors(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const colors = [];
      for (let i = 0; i < variations; i++) {
        const hue = (h + i * 72) % 360;
        colors.push(hslToHex(hue, 85, 45)); // bold saturation, darker tones
      }
      return colors;
    }
    function generateSpringColors(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const colors = [];
      for (let i = 0; i < variations; i++) {
        const hue = (h + i * 30) % 360;
        colors.push(hslToHex(hue, 60, 80)); // medium saturation, high light
      }
      return colors;
    }
    function generateSummerColors(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const colors = [];
      for (let i = 0; i < variations; i++) {
        const hue = (h + i * 25) % 360;
        colors.push(hslToHex(hue, 40, 70)); // lower saturation, soft light
      }
      return colors;
    }
    function generateRelaxingColors(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const baseHue = (h + 180) % 360; // shift toward cool hues
      const colors = [];
      for (let i = 0; i < variations; i++) {
        const hue = (baseHue + i * 15) % 360;
        colors.push(hslToHex(hue, 30, 75)); // soft light and saturation
      }
      return colors;
    }
    function generateEnergeticColors(hex, variations = 5) {
      const [h, , ] = hexToHsl(hex);
      const colors = [];
      for (let i = 0; i < variations; i++) {
        const hue = (h + i * 60) % 360;
        colors.push(hslToHex(hue, 100, 60)); // high sat, balanced light
      }
      return colors;
    }
    function showReferenceSwatch(hex) {
      const referenceRow = document.getElementById('referenceRow');
      referenceRow.innerHTML = '';
      const swatch = document.createElement('div');
      swatch.className = 'swatch';
      swatch.innerHTML = `<div class="swatch-color" style="background:${hex};border:2.5px solid #3c75b4;"></div><span class="swatch-hex">${hex}</span>`;
      swatch.onclick = function() {
        navigator.clipboard.writeText(hex);
        const hexSpan = swatch.querySelector('.swatch-hex');
        hexSpan.textContent = hex + ' âœ“';
        setTimeout(() => { hexSpan.textContent = hex; }, 1000);
      };
      referenceRow.appendChild(swatch);
    }
    function showSwatches(hex, scheme) {
      const swatchRow = document.getElementById('swatchRow');
      swatchRow.innerHTML = '';
      let n = colorCount[scheme] || 5;
      let colors = [];
      switch (scheme) {
        case 'complementary':
          colors = generateComplementary(hex);
          break;
        case 'analogous':
          colors = generateAnalogous(hex, n);
          break;
        case 'triadic':
          colors = generateTriadic(hex);
          break;
        case 'split-complementary':
          colors = generateSplitComplementary(hex);
          break;
        case 'tetradic':
          colors = generateTetradic(hex);
          break;
        case 'square':
          colors = generateSquare(hex);
          break;
        case 'monochromatic':
          colors = generateMonochromatic(hex, n);
          break;
        case 'pastel':
          colors = generatePastel(hex, n);
          break;
        case 'gradient':
          colors = generateGradient(hex, 120, n);
          break;
        case 'highkey':
          colors = generateHighKey(hex, n);
          break;
        case 'lowkey':
          colors = generateLowKey(hex, n);
          break;
        case 'polychromatic':
          colors = generatePolychromatic(hex, n);
          break;
        // For schemes not covered, fallback to previous logic
        case 'earth':
          colors = generateEarth(hex);
          break;
        case 'warm':
          colors = generateWarm(hex, n);
          break;
        case 'cool':
          colors = generateCool(hex, n);
          break;
        case 'achromatic':
          colors = generateAchromatic(n);
          break;
        case 'accented-neutral':
          colors = generateAccentedNeutral(hex);
          break;
        case 'compound':
          colors = generateCompound(hex);
          break;
        case 'discordant':
          colors = generateDiscordant(hex);
          break;
        case 'metallic':
          colors = generateMetallic(hex);
          break;
        case 'gradient-extended':
          colors = generateGradientExtended(hex);
          break;
        case 'optical-mix':
          colors = generateOpticalMix(hex);
          break;
        case 'accessible':
          colors = generateAccessible(hex);
          break;
        case 'psychology-calm':
          colors = generatePsychologyCalm(hex);
          break;
        case 'spring':
          colors = generateSpringColors(hex, n);
          break;
        case 'summer':
          colors = generateSummerColors(hex, n);
          break;
        case 'winter':
          colors = generateWinterColors(hex, n);
          break;
        case 'relaxing':
          colors = generateRelaxingColors(hex, n);
          break;
        case 'energetic':
          colors = generateEnergeticColors(hex, n);
          break;
        default:
          colors = [hex];
      }
      colors.forEach(color => {
        const swatch = document.createElement('div');
        swatch.className = 'swatch';
        swatch.innerHTML = `<div class="swatch-color" style="background:${color}"></div><span class="swatch-hex">${color}</span>`;
        swatch.onclick = function() {
          navigator.clipboard.writeText(color);
          const hexSpan = swatch.querySelector('.swatch-hex');
          hexSpan.textContent = color + ' âœ“';
          setTimeout(() => { hexSpan.textContent = color; }, 1000);
        };
        swatchRow.appendChild(swatch);
      });
      // Show or hide the + button
      const addBtn = document.getElementById('addColorBtn');
      if (extendableSchemes.includes(scheme)) {
        addBtn.style.display = '';
      } else {
        addBtn.style.display = 'none';
      }
    }
    const colorPicker = document.getElementById('colorPicker');
    const hexInput = document.getElementById('hexInput');
    const schemeSelect = document.getElementById('schemeSelect');
    function updateAll() {
      let hex = clampHex(hexInput.value);
      hexInput.value = hex;
      colorPicker.value = hex;
      showReferenceSwatch(hex);
      showSwatches(hex, schemeSelect.value);
      document.getElementById('schemeDesc').textContent = SCHEME_DESCS[schemeSelect.value] || '';
    }
    colorPicker.addEventListener('input', function() {
      hexInput.value = colorPicker.value.toUpperCase();
      updateAll();
    });
    hexInput.addEventListener('input', function() {
      let val = hexInput.value.trim();
      if (!val.startsWith('#')) val = '#' + val;
      if (/^#[0-9A-Fa-f]{3,6}$/.test(val)) {
        colorPicker.value = clampHex(val);
        updateAll();
      }
    });
    schemeSelect.addEventListener('change', updateAll);
    document.getElementById('addColorBtn').onclick = function() {
      let scheme = schemeSelect.value;
      if (extendableSchemes.includes(scheme)) {
        colorCount[scheme] = (colorCount[scheme] || 7) + 2;
        updateAll();
      }
    };
    // Initial render
    updateAll();
  </script>
</body>
</html> 